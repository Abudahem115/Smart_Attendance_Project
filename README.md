# ğŸ¯ Smart Attendance System

A **Face Recognition** based attendance system built with Python, Flask, and Supabase. Supports both Windows/PC and Raspberry Pi 4.

---

## âœ¨ Features

- **Face Recognition** - Automatic attendance marking via camera
- **Duplicate Detection** - Prevents the same person from registering twice
- **Web Dashboard** - Admin interface for managing employees and viewing attendance
- **Email Notifications** - Sends alerts when attendance is marked
- **Cross-Platform** - Works on Windows PC and Raspberry Pi 4

---

## ğŸ› ï¸ Requirements

- Python 3.10+
- Webcam or Pi Camera Module 2
- Supabase Account (free tier works)

---

## ğŸ“¦ Installation

### 1. Clone the Repository
```bash
git clone https://github.com/Abudahem115/Smart_Attendance_Project.git
cd Smart_Attendance_Project
```

### 2. Create Virtual Environment
```bash
# Windows
python -m venv venv
.\venv\Scripts\activate

# Linux/Pi
python3 -m venv venv
source venv/bin/activate
```

### 3. Install Dependencies
```bash
pip install -r requirements.txt
```

### 4. Setup Supabase Database

1. Go to [supabase.com](https://supabase.com) and create a project
2. Run this SQL in the **SQL Editor**:

```sql
-- Create Employees Table
create table employees (
  id bigint generated by default as identity primary key,
  name text not null,
  employee_code text unique not null,
  email text,
  department text,
  face_encoding jsonb
);

-- Create Attendance Table
create table attendance (
  id bigint generated by default as identity primary key,
  employee_id bigint references employees(id) on delete cascade,
  date text not null,
  time text not null,
  status text default 'Present'
);

-- Create Admins Table
create table admins (
  id bigint generated by default as identity primary key,
  username text not null,
  password text not null
);

-- Insert Default Admin
insert into admins (username, password) values ('admin', 'admin123');
```

### 5. Configure Environment

Create a `.env` file in the project root:
```ini
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=your-service-role-key
```

---

## ğŸš€ Running the System

### Start Web Dashboard (Admin Interface)
```bash
python server.py
```
Access at: **http://localhost:8080**

Default login: `admin` / `admin123`

### Start Face Recognition Camera
```bash
python start_system.py
```

---

## ğŸ“ Raspberry Pi 4 Specific

### Additional Setup
```bash
# Install system dependencies
sudo apt install -y python3-venv python3-picamera2

# Use system site-packages for camera access
python3 -m venv --system-site-packages venv
source venv/bin/activate
pip install -r hardware_modules/requirements_pi.txt
```

### Run on Pi
```bash
python start_system.py
```

---

## ğŸ“ Project Structure

```
Smart_Attendance_Project/
â”œâ”€â”€ ai_modules/          # Face recognition logic
â”œâ”€â”€ database_modules/    # Supabase CRUD operations
â”œâ”€â”€ hardware_modules/    # Pi-specific files
â”œâ”€â”€ web_interface/       # Flask app and templates
â”œâ”€â”€ utils/               # Email notifications
â”œâ”€â”€ server.py            # Start web server
â”œâ”€â”€ start_system.py      # Start camera recognition
â””â”€â”€ .env                 # Your credentials (git-ignored)
```

---

## ğŸ”’ Security Notes

- Never commit your `.env` file
- Change the default admin password after first login
- Use Supabase "Service Role" key for backend operations

---

## ğŸ“ Support

For issues, open a GitHub issue or contact the maintainer.
